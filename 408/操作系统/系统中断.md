

## 系统中断io
中断io指的是不需要检查io设备的状态(不意味着计算机完全不与状态口交互, 这里强调的是一个响应式的过程, 而不是主动轮询的过程), 而是当io设备准备好接收数据时, 向计算机发送一个中断信号, 通知计算机处理相关事件
emmmm, 可是题目里说的是io端口会有状态口和控制口

### 实现方式
中断机制的实现涉及到硬件和操作系统两个层面：
- 硬件层面
1. **中断请求线（IRQ）**: 外部设备（如打印机）通过中断请求线发送中断信号给处理器。每个设备通常都分配有一个唯一的IRQ。
2. **中断控制器**: 当有多个设备同时发送中断请求时，中断控制器负责决定哪个中断请求应该被优先处理。中断控制器将选中的中断请求发送给处理器。
3. **处理器**: 处理器接收到中断请求后，会暂停当前执行的程序，保存当前的状态（如寄存器值），并跳转到预定的内存地址执行中断服务程序（ISR）。这个内存地址通常存储着操作系统提供的ISR入口点。

- 操作系统层面
1. **中断服务程序（ISR）**: 操作系统提供了一系列中断服务程序来响应不同的中断请求。每个ISR对应于特定的中断请求，并包含处理该中断的代码。
2. **状态和控制信息**: 操作系统维护着有关硬件状态和控制信息的数据结构。在执行ISR时，操作系统会读取和修改这些数据结构来获取设备的状态和发送控制命令。
3. **上下文切换**: 在处理中断时，操作系统执行上下文切换，保存当前执行任务的状态，并加载ISR的状态。在ISR执行完毕后，操作系统恢复原先任务的状态，继续执行。
通过这种方式，中断机制使得计算机能够以响应式的方式处理外部设备的事件，而不是通过主动轮询的方式。硬件负责检测中断信号并通知处理器，操作系统负责管理中断和执行相应的中断服务程序。这种协同工作确保了中断机制的高效运行。